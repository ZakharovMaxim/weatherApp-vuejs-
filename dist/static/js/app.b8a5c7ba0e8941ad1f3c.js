webpackJsonp([0],[,function(t,i,e){function a(t){e(13)}var n=e(0)(e(4),e(23),a,"data-v-4f687d9d",null);t.exports=n.exports},,,function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e(16),n=e.n(a),s=e(18),o=e.n(s),r=e(19),c=e.n(r);i.default={name:"app",data:function(){return{isActiveWidget:!1,city:{},mapURL:"",weather:[],status:200,loading:!1}},methods:{find:function(t,i){for(var e=0;e<t.length;e++)if(t[e].date===i)return e;return-1},search:function(t){this.loading=!0,this.isActiveWidget=!1;var i=-1;this.$http.get("http://api.openweathermap.org/data/2.5/forecast?q="+t+"&APPID=ddb7e5337922c03da66ddcbd429aea6e&lang=ru&units=metric").then(function(e){var a=this;this.loading=!1,this.isActiveWidget=!0,this.city=e.body.city,this.city.name=t,this.weather=[],this.status=200,e.body.list.forEach(function(t){var e=t.dt_txt.split(" ")[0],n={};n.condition={},n.condition.clearSky=0,n.condition.cloudySky=0,n.condition.liteCloudySky=0,n.condition.storm=0,n.condition.snow=0,n.condition.liteRain=0,n.condition.rain=0,t.wind.deg=Math.round(t.wind.deg),t.main.temp=Math.round(t.main.temp),t.main.temp_min=Math.round(t.main.temp_min),t.main.temp_max=Math.round(t.main.temp_max);var s=t.weather[0].description;if(~a.find(a.weather,e))a.weather[i].list.push(t),a.weather[i].minT>t.main.temp_min&&(a.weather[i].minT=t.main.temp_min),a.weather[i].maxT<t.main.temp_max&&(a.weather[i].maxT=t.main.temp_max),a.weather[i].avgT=Math.round((a.weather[i].avgT+t.main.temp)/2),"дождь"!=s&&"сильный дождь"!=s&&"ливень"!=s||a.weather[i].condition.rain++,~s.indexOf("снег")&&a.weather[i].condition.snow++,(~s.indexOf("молния")||~s.indexOf("гроза"))&&a.weather[i].condition.storm++,(~s.indexOf("облачно")||~s.indexOf("пасмурно"))&&"слегка облачно"!=s&&a.weather[i].condition.cloudySky++,~s.indexOf("ясно")&&a.weather[i].condition.clearSky++,"слегка облачно"==s&&a.weather[i].condition.liteCloudySky++,"небольшой дождь"==s&&a.weather[i].condition.liteRain++;else{n.date=e;var o=new Date(e.split("-")[0],e.split("-")[1],e.split("-")[2]-2).toLocaleString("ru",{weekday:"short"});n.dayName=o.slice(0,1).toUpperCase()+o.slice(1),n.minT=t.main.temp_min,n.maxT=t.main.temp_max,n.avgT=t.main.temp,n.list=[],n.list.push(t),"дождь"!=s&&"сильный дождь"!=s&&"ливень"!=s||n.condition.rain++,~s.indexOf("снег")&&n.condition.snow++,(~s.indexOf("молния")||~s.indexOf("гроза"))&&n.condition.storm++,(~s.indexOf("облачно")||~s.indexOf("пасмурно"))&&"слегка облачно"!=s&&n.condition.cloudySky++,~s.indexOf("ясно")&&n.condition.clearSky++,"слегка облачно"==s&&n.condition.liteCloudySky++,"легкий дождь"==s&&n.condition.liteRain++,i++,a.weather.push(n)}}),this.mapURL='https://www.google.com/maps/embed/v1/place?key=AIzaSyCUFi97R3tGrOFSwrooJPWr1m0wDsZBm1U&q="'+t+'"';for(var n=0;n<this.weather.length;n++){var s={},o=0,r="";s.conditionNameRu="",s.icon="";for(var c in this.weather[n].condition)this.weather[n].condition[c]>o&&(o=this.weather[n].condition[c],r=c);switch(r){case"rain":s.conditionNameRu="Дождь",s.icon="wi-day-rain";break;case"snow":s.conditionNameRu="Снег",s.icon="wi-day-snow";break;case"storm":s.conditionNameRu="Гроза",s.icon="wi-day-sleet-storm";break;case"cloudySky":s.conditionNameRu="Облачно",s.icon="cloudy";break;case"clearSky":s.conditionNameRu="Ясно",s.icon="wi-day-sunny";break;case"liteCloudySky":s.conditionNameRu="Слегка облачно",s.icon="wi-day-cloudy";break;case"liteRain":s.conditionNameRu="Небольшой дождь",s.icon="wi-day-showers"}this.weather[n].condition=s}console.log(this.weather)},function(t){this.status=500})}},components:{Widget:n.a,myForm:o.a,widgetLoader:c.a}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e(17),n=e.n(a);i.default={name:"widget",props:["weather","mapURL","city","status"],data:function(){return{currentTab:1,loadingMap:!0,hoverElement:{el:document.querySelector(".widget__hoverEffect"),pos:0},iconsDay:{"ясно":"wi-day-sunny","пасмурно":"cloudy","легкий дождь":"wi-day-showers","слегка облачно":"wi-day-cloudy","дождь":"wi-day-rain","облачно":" cloudy","снег":"wi-day-snow","молния":"wi-day-sleet-storm"},iconsNight:{"ясно":"wi-night-clear","пасмурно":"cloudy","легкий дождь":"wi-night-alt-sprinkle","слегка облачно":"wi-night-alt-cloudy","дождь":"wi-night-alt-rain","облачно":"cloudy","снег":"wi-night-alt-snow","молния":"wi-night-alt-lightning"}}},methods:{changeTab:function(t,i){this.currentTab=t;var e="A"==i.target.nodeName?i.target.parentNode:i.target.parentNode.parentNode;this.hoverElement.pos=e.getBoundingClientRect().left},loaded:function(){this.loadingMap=!1},enter:function(){console.log(1)}},components:{mapLoader:n.a}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={name:"mapLoader"}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={name:"myForm",data:function(){return{isActivePlaceholder:!1,searchStr:"",error:!1}},props:["isActiveWidget"],methods:{focusForm:function(){document.querySelector(".form > input").focus()},search:function(t){if(!this.searchStr.length)return this.error=!0,!1;this.$emit("pressed",this.searchStr)}}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={name:"widgetLoader"}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e(3),n=e(1),s=e.n(n),o=e(2);a.a.config.productionTip=!1,a.a.use(o.a),new a.a({el:"#app",template:"<App/>",components:{App:s.a}})},function(t,i){},function(t,i){},function(t,i){},function(t,i){},function(t,i){},function(t,i,e){t.exports=e.p+"static/img/404.099f83a.jpg"},function(t,i,e){function a(t){e(14)}var n=e(0)(e(5),e(24),a,"data-v-716a8619",null);t.exports=n.exports},function(t,i,e){function a(t){e(11)}var n=e(0)(e(6),e(21),a,"data-v-1786e12c",null);t.exports=n.exports},function(t,i,e){function a(t){e(12)}var n=e(0)(e(7),e(22),a,"data-v-449c2245",null);t.exports=n.exports},function(t,i,e){function a(t){e(10)}var n=e(0)(e(8),e(20),a,"data-v-0c9aa7ec",null);t.exports=n.exports},function(t,i){t.exports={render:function(){var t=this,i=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"loader"},[e("div",{staticClass:"loader__animation"},[e("span",{staticClass:"loader__icon"})]),t._v(" "),e("div",{staticClass:"loader__text"},[t._v("\n    Ищем погоду..\n  ")])])}]}},function(t,i){t.exports={render:function(){var t=this,i=t.$createElement;return(t._self._c||i)("div",{staticClass:"loader"})},staticRenderFns:[]}},function(t,i){t.exports={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"form-wrap",class:t.isActiveWidget?"active":""},[e("div",{staticClass:"form"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchStr,expression:"searchStr"}],attrs:{type:"text",autofocus:""},domProps:{value:t.searchStr},on:{focus:function(i){t.isActivePlaceholder=!0},blur:function(i){t.isActivePlaceholder=!1},keyup:function(i){if(!("button"in i)&&t._k(i.keyCode,"enter",13))return null;t.search(i)},input:function(i){i.target.composing||(t.searchStr=i.target.value)}}}),t._v(" "),e("a",{attrs:{href:""},on:{click:function(i){i.preventDefault(),t.search(i)}}},[t._v("Найти")]),t._v(" "),e("div",{staticClass:"form__placeholder",class:{active:t.isActivePlaceholder||0!=t.searchStr.length,error:t.error},on:{click:t.focusForm,animationend:function(i){t.error=!1}}},[t._v("\n     Введите населенный пункт\n   ")])])])},staticRenderFns:[]}},function(t,i){t.exports={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"app"}},[e("myForm",{attrs:{isActiveWidget:t.isActiveWidget},on:{pressed:t.search}}),t._v(" "),t.isActiveWidget?e("widget",{attrs:{city:t.city,weather:t.weather,mapURL:t.mapURL,status:t.status}}):t._e(),t._v(" "),t.loading?e("widgetLoader"):t._e()],1)},staticRenderFns:[]}},function(t,i,e){t.exports={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"widget"},[200!=t.status?a("div",[404==t.status?a("div",[a("img",{staticStyle:{"max-width":"100%"},attrs:{src:e(15),alt:""}})]):t._e(),t._v(" "),500==t.status?a("div",[t._v("\n      500\n    ")]):t._e()]):a("div",[a("div",{staticClass:"widget__weather"},[a("div",{staticClass:"widget__menu"},[a("ul",t._l(t.weather,function(i,e){return a("li",{staticClass:"day"},[a("a",{attrs:{href:""},on:{click:function(i){i.preventDefault(),t.changeTab(e+1,i)}}},[a("div",{staticClass:"day__name"},[t._v(t._s(i.dayName))]),t._v(" "),a("div",{staticClass:"day__icon"},[a("i",{staticClass:"wi",class:i.condition.icon})]),t._v(" "),a("div",{staticClass:"day__temp-range"},[t._v(t._s(i.minT)),a("sup",[t._v("o")]),t._v("/"+t._s(i.maxT)),a("sup",[t._v("o")])])])])}))]),t._v(" "),a("div",{staticClass:"widget__tabs"},t._l(t.weather,function(i,e){return a("div",{staticClass:"widget__tab",class:t.currentTab==e+1?"active":""},[a("div",{staticClass:"total-description"},[a("div",{staticClass:"avg-temp"},[t._v(t._s(i.avgT)),a("sup",[t._v("o")])]),t._v(" "),a("div",{staticClass:"range-temp"},[a("span",[t._v(t._s(i.minT)),a("sup",[t._v("o")])]),t._v(" "),a("span",[t._v(t._s(i.maxT)),a("sup",[t._v("o")])])]),t._v(" "),a("div",{staticClass:"day-icon"},[a("i",{staticClass:"wi",class:i.condition.icon})]),t._v(" "),a("div",{staticClass:"desc"},[t._v("\n            "+t._s(i.condition.conditionNameRu)+"\n          ")])]),t._v(" "),a("div",{staticClass:"table"},[a("div",{staticClass:"col"},[a("div",{staticClass:"row th"},[t._v("Время")]),t._v(" "),a("div",{staticClass:"row th"},[t._v("Температура")]),t._v(" "),a("div",{staticClass:"row th"},[t._v("Влажность")]),t._v(" "),a("div",{staticClass:"row th"},[t._v("Ветер км/час")]),t._v(" "),a("div",{staticClass:"row th"},[t._v("Состояние")])]),t._v(" "),t._l(i.list,function(i,e){return a("div",{staticClass:"col"},[a("div",{staticClass:"time row"},[t._v("\n              "+t._s(i.dt_txt.split(" ")[1].split(":").slice(0,2).join(":"))+"\n            ")]),t._v(" "),a("div",{staticClass:"temp row"},[t._v("\n              "+t._s(i.main.temp)),a("sup",[t._v("o")])]),t._v(" "),a("div",{staticClass:"humidity row"},[t._v("\n              "+t._s(i.main.humidity)+"%\n            ")]),t._v(" "),a("div",{staticClass:"wind row"},[a("i",{staticClass:"wi wi-wind",style:{transform:"rotate("+i.wind.deg+"deg)"}}),t._v(t._s(i.wind.speed)+"\n            ")]),t._v(" "),a("div",{staticClass:"description row"},[t._v("\n              "+t._s(i.weather[0].description.slice(0,1).toUpperCase()+i.weather[0].description.slice(1))+"\n              "),a("i",{staticClass:"wi",class:i.dt_txt.split(" ")[1].split(":")[0]>3&&i.dt_txt.split(" ")[1].split(":")[0]<19?t.iconsDay[i.weather[0].description]:t.iconsNight[i.weather[0].description]})])])})],2)])}))]),t._v(" "),a("div",{staticClass:"widget__map"},[t.loadingMap?a("mapLoader",{attrs:{loading:t.loadingMap}}):t._e(),t._v(" "),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.loadingMap,expression:"!loadingMap"}],staticStyle:{border:"0"},attrs:{width:"450",height:"250",frameborder:"0",src:t.mapURL},on:{load:t.loaded}})],1)])])},staticRenderFns:[]}},,,function(t,i){}],[9]);
//# sourceMappingURL=app.b8a5c7ba0e8941ad1f3c.js.map